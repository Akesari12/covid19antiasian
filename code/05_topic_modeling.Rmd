---
title: "03_preprocess_data"
author: "Jae Yeon Kim"
date: "7/2/2020"
output: html_document
---

# Import packages and files 

## Packages

```{r}

pacman::p_load(tidyverse, # for tidyverse 
               ggpubr, # for arranging ggplots   
               ggthemes, # for fancy ggplot themes
               here, # for reproducibility 
               patchwork, # for easy ggarrange
               ggsci, # for pubs 
               fastDummies, # to create dummy variables fast
               quanteda, # for text preprocessing 
               keyATM, # for keyword based topic modeling 
               data.table) # for fast data manipulation

# for publication-friendly theme 
theme_set(theme_pubr())

# custom functions
source(here("functions", "stacked_bar_plot.R"))

```

## Files 

```{r}

df <- data.table::fread(here("processed_data", "cleaned_data.csv"))[,-1]

```

# Preprocess 

I followed [the guideline](https://keyatm.github.io/keyATM/articles/pkgdown_files/Preparation.html) provided by the keyATM package developer.

```{r}
key_corpus <- corpus(df, text_field = "full_text", 
                     docvars = COVARIATE)

?corpus
```

